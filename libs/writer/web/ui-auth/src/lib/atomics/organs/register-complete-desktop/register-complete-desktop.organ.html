
<div class="stepper-process-bar" [style.width]="'calc(' + widthProcess + '% + '+ expandedWidth +'px)'"></div>
<mat-horizontal-stepper #stepper class="rounded-md nunito" (selectionChange)="selectionChange($event)">
    <mat-step [label]="'Tài khoản'" [state]="'auth'" [stepControl]="requireForm" errorMessage="username password là bắt buộc">
        <molec-register-form [form]="requireForm"></molec-register-form>
        <div>
            <!-- <pre> {{ requireForm.hasError('missmatch') }} </pre> -->
            <!-- <pre> {{ requireForm.errors | json }} </pre> -->
            <p *ngIf="requireForm.hasError('missmatch')" class="text-red-600 mt-2 text-xs">Mật khẩu không khớp</p>
            <div class="flex justify-end">
                <button matStepperNext class="rounded-md text-white bg-green-primary px-5 py-2 nunito text-sm"> Tiếp </button>
            </div>
        </div>
    </mat-step>
    <mat-step [label]="'Thông tin'" [state]="'exp'" [stepControl]="optionalForm" errorMessage="Tên hiển thị là bắt buộc">
        <div [formGroup]="optionalForm">
            <input-form required [inputControl]="optionalForm.get('name')" [placeholder]="'Tên hiển thị'"></input-form>
            <input-form [inputControl]="optionalForm.get('firstname')" [placeholder]="'Tên'"></input-form>
            <input-form [inputControl]="optionalForm.get('middlename')" [placeholder]="'Tên đệm'"></input-form>
            <input-form [inputControl]="optionalForm.get('lastname')" [placeholder]="'Họ'"></input-form>
            <div class="flex justify-end">
                <button matStepperPrevious class="rounded-md border border-gray-20 bg-white px-5 py-2 nunito text-sm mr-3"> Quay lại </button>
                <button matStepperNext class="rounded-md text-white bg-green-primary px-5 py-2 nunito text-sm"> Tiếp </button>
            </div>
        </div>
    </mat-step>
    <mat-step [label]="'Trải nghiệm'" [state]="'exp'" [stepControl]="experienceForm" errorMessage="Tùy biến ứng dụng theo ý của bạn">
        <form [formGroup]="experienceForm">
            <div class="mb-6 flex items-center">
                <label class="text-gray-400 w-2/5"> Giới hạn nội dung</label>
                <div class="w-3/5">
                    <select formControlName="age"
                        class="border rounded-full border-gray-200 bg-white pl-4 pr-8 py-2 outline-none focus:outline-none focus:ring-1 focus:ring-gray-300 focus:border-gray-300">
                        <option value="1" class="py-1">6-13</option>
                        <option value="2" class="py-1">13-18</option>
                        <option value="3" class="py-1">18+</option>
                    </select>
                </div>
            </div>
            <div class="mb-6 flex items-center">
                <label class="text-gray-400 w-2/5"> Gợi ý truyện theo sở thích</label>
            </div>
            <div class="md:w-3/5">
                <ng-select class="custom" [items]="genres" bindValue="genreId" [multiple]="true" bindLabel="name" formControlName="genreIds"
                    placeholder="Thể loại">
                </ng-select>
            </div>
            <div class="flex justify-end">
            <button matStepperPrevious class="rounded-md border border-gray-20 bg-white text-primary-green px-5 py-2 nunito text-sm mr-3"> Quay lại </button>
            <button matStepperNext class="rounded-md text-white bg-green-primary px-5 py-2 nunito text-sm"> Tiếp </button>
            </div>
        </form>
    </mat-step>
    <mat-step [label]="'Hoàn thiện'" [state]="'done'">
        <p>{{ requireForm.value | json }}</p>
        <p>{{ optionalForm.value | json }}</p>
        <p>{{ experienceForm.value | json }}</p>
        <p>You are now done.</p>
        <div class="flex justify-end">
            <button matStepperNext class="rounded-md text-white bg-green-primary px-5 py-2 nunito text-sm mr-3"> Tiếp </button>
            <button (click)="stepper.reset()" class="rounded-md text-gray bg-white border border-solid border-gray-light px-5 py-2 nunito text-sm"> Reset </button>
        </div>

    </mat-step>
    <ng-template matStepperIcon="edit">
        <fa-icon class="text-white" [icon]="icons.faCheck"></fa-icon>
    </ng-template>
    <ng-template matStepperIcon="error">
        <fa-icon class="text-red" [icon]="icons.faExclamationCircle"></fa-icon>
    </ng-template>

</mat-horizontal-stepper>
